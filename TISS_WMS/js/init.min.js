function resetToolbarStatus() {
    $("#btnDelete") && $("#btnDelete").addClass("disabled");
    $("#btnEdit") && $("#btnEdit").addClass("disabled")
}
function createMenuItem(n, t) {
    var e = ys.getGuid, r = !0, i, u, f;
    return n == undefined || $.trim(n).length == 0 ? !1 : (i = $(window.parent.document),
        $(".menuTab", i).each(function () {
            if ($(this).data("id") == n)
                return $(this).hasClass("active") || ($(this).addClass("active").siblings(".menuTab").removeClass("active"),
                    $(".page-tabs-content").animate({
                        marginLeft: ""
                    }, "fast"),
                    $(".mainContent .YiSha_iframe", i).each(function () {
                        if ($(this).data("id") == n)
                            return $(this).show().siblings(".YiSha_iframe").hide(),
                                !1
                    })),
                    r = !1,
                    !1
        }),
        r && (u = '<a href="javascript:;" class="active menuTab" data-id="' + n + '">' + t + ' <i class="fa fa-times-circle"><\/i><\/a>',
            $(".menuTab", i).removeClass("active"),
            f = '<iframe class="YiSha_iframe" name="iframe' + e + '" width="100%" height="100%" src="' + n + '" frameborder="0" data-id="' + n + '" seamless><\/iframe>',
            $(".mainContent", i).find("iframe.YiSha_iframe").hide().parents(".mainContent").append(f),
            $(".menuTabs .page-tabs-content", i).append(u)),
        !1)
}
function fuzzySearch(n, t, i, r, u, f, e, o) {
    initSearchInput(n, i);
    var h = []
        , s = searchText(n, t, h, i, r, f);
    bindFun(i, s, u, f, e, o);
    $(this).keyup(function () {
        var c, l;
        if (timerStatus == 1) {
            selectInputAwaitTime = 500;
            return
        }
        c = this;
        timerStatus = 1;
        l = setInterval(function () {
            selectInputAwaitTime > 0 ? selectInputAwaitTime -= 200 : (clearInterval(l),
                timerStatus = 0,
                c.value = c.value.replace(" ", ""),
                $("#" + i).show(),
                s = searchText(n, t, h, i, r, f),
                $("#" + i).scrollTop(0),
                bindFun(i, s, u, f, e, o))
        }, 200)
    })
}
function bindFun(n, t, i, r, u, f) {
    $("#" + n).html("");
    $("#" + n).css("width", $("#" + n).parent().width() + "px");
    $("#" + n).append(u);
    $.each(t.value, function (t, i) {
        var r = '<div style="padding:6px;height:35px;line-height:25px" id=' + t + " >" + i.eleName + "<\/div >";
        $("#" + n).append(r)
    });
    for (var e = 0; e < $(".picture_click").length; e++)
        $(".picture_click").eq(e).click(function () {
            $(this).parent().find("." + n).toggle()
        });
    $("." + n + " div").mouseenter(function () {
        $(this).css("background", "#5897fb").siblings().css("background", "");
        $(this).css("color", "white").siblings().css("color", "black")
    });
    $("." + n + " div").bind("click", function () {
        var u;
        $(this).parent().parent().find("[selectName=" + n + "]").val($(this).html());
        var e = i.split(",")
            , o = r.split(",")
            , s = $(this).html().split(" ");
        for (u = 0; u < e.length; u++)
            $("#" + e[u]).val(t.entity[$(this).attr("id")][o[u]]);
        f();
        $(this).parent().hide()
    })
}
function initSearchInput(n, t) {
    document.body.onclick = function (i) {
        i = i || window.event;
        var r = i.target || i.srcElement;
        r == n ? $("#" + t).show() : $("#" + t).hide()
    }
}
function searchText(n, t, i, r, u, f) {
    var s = $(n).val(), e = [], o;
    return i = [],
        o = {
            keywords: s
        },
        $.ajax({
            url: t,
            data: o,
            dataType: "json",
            "async": !1,
            success: function (n) {
                for (var s, o, t = n.Data, h = u.split(","), r = 0; r < t.length; r++) {
                    for (s = "",
                        o = 0; o < h.length; o++)
                        s += t[r][h[o]] + " ";
                    i.push({
                        eleId: t[r][f],
                        eleName: s
                    })
                }
                e.value = i;
                e.entity = t
            }
        }),
        e
}
$(function () {
    var n, t, i;
    $(".check-box").length > 0 && $(".check-box").iCheck({
        checkboxClass: "icheckbox-blue",
        radioClass: "iradio-blue"
    });
    $(".radio-box").length > 0 && $(".radio-box").iCheck({
        checkboxClass: "icheckbox-blue",
        radioClass: "iradio-blue"
    });
    $(".select-time").length > 10 && layui.use("laydate", function () {
        var i = layui.laydate
            , n = i.render({
                elem: "#startTime",
                max: $("#endTime").val(),
                theme: "molv",
                trigger: "click",
                done: function (n, i) {
                    n !== "" ? (t.config.min.year = i.year,
                        t.config.min.month = i.month - 1,
                        t.config.min.date = i.date) : (t.config.min.year = "",
                            t.config.min.month = "",
                            t.config.min.date = "")
                }
            })
            , t = i.render({
                elem: "#endTime",
                min: $("#startTime").val(),
                theme: "molv",
                trigger: "click",
                done: function (t, i) {
                    t !== "" ? (n.config.max.year = i.year,
                        n.config.max.month = i.month - 1,
                        n.config.max.date = i.date) : (n.config.max.year = "",
                            n.config.max.month = "",
                            n.config.max.date = "")
                }
            })
    });
    $("#keyword").length > 0 && $("#keyword").bind("focus", function () {
        $("#keyword").hasClass("empty") && $("#keyword").removeClass("empty")
    }).bind("blur", function (n) {
        $("#keyword").val() === "" && $("#keyword").addClass("empty");
        $.tree.searchNode(n)
    }).bind("input propertychange", $.tree.searchNode);
    n = !1;
    $("#btnExpandAll").click(function () {
        n ? $("#gridTable").bootstrapTreeTable("expandAll") : $("#gridTable").bootstrapTreeTable("collapseAll");
        n = n ? !1 : !0
    });
    $("#gridTable").on("check.bs.table uncheck.bs.table check-all.bs.table uncheck-all.bs.table", function () {
        var n = $("#gridTable").bootstrapTable("getSelections");
        $("#btnDelete") && $("#btnDelete").toggleClass("disabled", !n.length);
        $("#btnEdit") && $("#btnEdit").toggleClass("disabled", n.length != 1)
    });
    $.fn.select2 !== undefined && $("select.form-control.select2").each(function () {
        $(this).select2().on("change", function () {
            $(this).valid()
        })
    });
    $("#searchDiv").keyup(function (n) {
        n.which === 13 && $("#btnSearch").click()
    });
    top.getButtonAuthority && (t = [],
        $("#toolbar").find("a").each(function (n, i) {
            t.push(i.id)
        }),
        $(".toolbar").find("a").each(function (n, i) {
            t.push(i.id)
        }),
        i = top.getButtonAuthority(window.location.href, t),
        i && $.each(i, function (n, t) {
            $("#" + t).remove()
        }));
    $("input:text, input:password, input:radio, select").each(function (n, t) {
        t.id && $(t).attr("name", t.id)
    })
});
var selectInputAwaitTime = 500
    , timerStatus = 0;
